const e=312,n=390,l=10,t=250,o={X:157,Y:215},i=0,f=1,r=2,s=0,g=1,u=2,d=3,T=4,h=5;let m=0,y=0,p=-t,b=!1,S=0,x=3,v=0,Y=0,k=!1;const w=[[0,0,3,8,5,4],[3,8,5,16,10,10],[5,16,8,24,15,16],[8,24,11,32,20,24],[11,32,15,44,25,36],[15,44,19,58,30,48],[19,58,22,70,35,60],[22,70,29,90,40,75],[29,90,35,112,45,99],[35,112,45,140,50,122],[45,140,55,175,55,155]];function M(){b&&k&&v===f&&(m+=1,c.fillStyle="rgba(0, 0, 255, .8)",c.fillRect(0,0,e,n)),b&&k&&v===r&&(x-=1,c.fillStyle="rgba(255, 0, 0, .8)",c.fillRect(0,0,e,n)),b=!1,k=!1}function X(){c.font="24px monospace",c.fillStyle="#f0f0b5";let n="";for(var l=0;l<x;l++)n+="ðŸ’£";c.fillText(`ðŸ’Ž ${m}`,10,30),c.fillText(n,e-90,30)}function E(){c.font="24px monospace",c.fillStyle="#f0f0b5",c.fillText(`Coins: ${m}`,10,24)}function P(){if(v!==f)return;if(y<Y)return;const e=[155,215,1,155,235,2,150,265,4,140,315,9];let n=y-Y;n===e.length/3&&(k=!0),n>e.length/3-1||L(e[n*=3],e[n+1],e[n+2])}function $(e){const n=o.X-32.5,l=o.X+32.5;c.beginPath(),c.moveTo(n-e[s],o.Y+e[g]),c.lineTo(l+e[s],o.Y+e[g]),c.lineTo(l+e[u],o.Y+e[d]),c.lineTo(n-e[u],o.Y+e[d]),c.lineTo(n-e[s],o.Y+e[g]),c.fill(),c.stroke()}function C(e,n){const l=o.X-e[T],t=o.Y+e[h];c.font=`${12*n}px serif`,c.fillText("ðŸ’£",l,t)}function L(e,n){const l=o.X-e[T],t=o.Y+e[h];c.font=`${12*n}px serif`,c.fillText("ðŸ’Ž",l,t)}function O(){if(v!==r)return;if(y<Y)return;const e=[155,215,1,155,235,2,150,265,4,140,315,9];let n=y-Y;n===e.length/3-1&&(k=!0),n>e.length/3||C(e[n*=3],e[n+1],e[n+2])}function R(){c.fillStyle="#725636",c.fillRect(0,0,e,n)}function q(){c.beginPath(),c.arc(e/2,n/2,e/2,0,1*Math.PI,!0),c.rect(0,n/2,e,n/2),c.fillStyle="#000",c.fill()}function A(){const e=215;let n=[[0,0,3,8],[3,8,5,16],[5,16,8,24],[8,24,11,32],[11,32,15,44],[15,44,19,58],[19,58,22,70],[22,70,29,90],[29,90,35,112],[35,112,45,140],[45,140,55,175]];n=n.filter((e,n)=>y%2==0?n%2==0:n%2!=0),c.strokeStyle="#392b1b",c.fillStyle="#392b1b",c.beginPath(),n.forEach(n=>{c.moveTo(125-n[0],e+n[1]),c.lineTo(190+n[0],e+n[1]),c.lineTo(190+n[2],e+n[3]),c.lineTo(125-n[2],e+n[3]),c.lineTo(125-n[0],e+n[1])}),c.fill(),c.stroke()}function B(l=0){(0|(l|=0)-p)>=t&&(console.log("%cframe","color: #ddd;",y),p=l,R(),q(),A(),M(),X(),x<=0?c.fillText("Game Over",e/2-70,n/2-25):v||(Math.random()>.5?(v=f,Y=0|3*Math.random(),console.log("set activeType = COIN",v,Y)):(v=r,Y=0|3*Math.random(),console.log("set activeType = BOMB",v,Y))),c.fillStyle="green",c.strokeStyle="red",$(w[y]),L(w[y],y+1),(y+=1)===w.length&&(y=0,v=i)),x>0&&!window.pause&&window.requestAnimationFrame(B)}console.log("Coin Miner 2018"),a.addEventListener("click",e=>{console.log(e),b=!0}),a.addEventListener("touchend",e=>{console.log(e),b=!0}),B(),window.addEventListener("keydown",e=>{console.log(e),"Space"===e.code&&(e.shiftKey&&(y-=2)<0&&(y=10),console.log("skipping to frame",y),requestAnimationFrame(B))});

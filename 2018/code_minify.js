const WIDTH=312,HEIGHT=390,FRAME_LENGTH=8,FRAME_RATE=250;let score=0,frame=0,lastTimestamp=-FRAME_RATE,isKeyDown=!1,didScore=0,lives=3;console.log('Coin Miner 2018'),a.addEventListener('click',(b)=>{console.log(b),isKeyDown=!0}),a.addEventListener('touchend',(b)=>{console.log(b),isKeyDown=!0});function updateScore(){0==frame&&isKeyDown?(score+=1,didScore=3,c.fillStyle='rgba(0, 0, 255, .8)',c.fillRect(0,0,WIDTH,HEIGHT)):4==frame&&isKeyDown&&(lives-=1,c.fillStyle='rgba(255, 0, 0, .8)',c.fillRect(0,0,WIDTH,HEIGHT)),isKeyDown=!1}function renderHeader(){c.font='24px monospace',c.fillStyle='#f0f0b5';let b='';for(var d=0;d<lives;d++)b+='\uD83D\uDCA3';c.fillText(`ðŸ’Ž ${score}`,10,30),c.fillText(b,WIDTH-90,30)}function renderScore(){c.font='24px monospace',c.fillStyle='#f0f0b5',c.fillText(`Coins: ${score}`,10,24)}function renderCoin(){if(!(4>frame)){const b=[155,215,1,155,235,2,150,265,4,140,315,9];let d=3*(frame-4);drawCoin(b[d],b[d+1],b[d+2])}}function drawCoin(b,d,e){c.font=`${12*e}px serif`,c.fillText('\uD83D\uDC8E',b-3*e,d+3*e)}function renderBomb(){const b=[155,215,1,155,235,2,150,265,4,140,315,9];if(!(frame>=b.length)){const d=3*frame;drawBomb(b[d],b[d+1],b[d+2])}}function drawBomb(b,d,e){c.fillStyle='#392b1b',c.font=`${12*e}px serif`,c.fillText('\uD83D\uDCA3',b-3*e,d+3*e)}function clearScreen(){c.fillStyle='#725636',c.fillRect(0,0,WIDTH,HEIGHT)}function renderCave(){c.beginPath(),c.arc(WIDTH/2,HEIGHT/2,WIDTH/2,0,1*Math.PI,!0),c.rect(0,HEIGHT/2,WIDTH,HEIGHT/2),c.fillStyle='#000',c.fill()}function renderTrack(){const b=125,d=190,e=215;let f=[[0,0,3,8],[3,8,5,16],[5,16,8,24],[8,24,11,32],[11,32,15,44],[15,44,19,58],[19,58,22,70],[22,70,29,90],[29,90,35,112],[35,112,45,140],[45,140,55,175]];f=f.filter((b,d)=>0==frame%2?0==d%2:0!=d%2),c.beginPath(),f.forEach((f)=>{c.moveTo(b-f[0],e+f[1]),c.lineTo(d+f[0],e+f[1]),c.lineTo(d+f[2],e+f[3]),c.lineTo(b-f[2],e+f[3]),c.lineTo(b-f[0],e+f[1])}),c.fill(),c.stroke()}function tick(b=0){b=0|b;const d=0|b-lastTimestamp;d>=FRAME_RATE&&(lastTimestamp=b,clearScreen(),renderCave(),c.strokeStyle='#392b1b',c.fillStyle='#392b1b',updateScore(),renderTrack(),renderHeader(),0>=lives?c.fillText(`Game Over`,WIDTH/2-70,HEIGHT/2-25):(renderCoin(),renderBomb()),frame+=1,frame==FRAME_LENGTH&&(frame=0)),0<lives&&!window.pause&&window.requestAnimationFrame(tick)}tick();
function rollDice(a){for(var d=/(\d*)d(\d+)([+-]?\d*)/.exec(a),e=0|d[1]||1,n=0|d[2],o=0|d[3],r=0;e--;)r+=0|Math.random()*n+1;return r+=o}function battle(a,d){var e,n=["I spotted a "+d.name+"."];return e=d20()+a.bab,e>=d.ac?n.push("The "+d.name+" was no match for me!"):n.push("I managed to flee."),e=d20()+d.bab,e>a.ac&&(e=d.dmg(),a.hp-=e,n.push("I took "+e+" damage.")),n}var d20=rollDice.bind(0,"1d20"),d4=rollDice.bind(0,"1d4"),player={hp:11,bab:5,ac:17},goblin={name:"Goblin",bab:2,ac:13,dmg:d4};

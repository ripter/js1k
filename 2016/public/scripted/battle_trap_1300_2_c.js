!function(){function n(n){function t(n){return 5===u.length&&u.shift(),u.push(n),u}function e(a,u){if(n.length!==a){if(u===n[a].length)return setTimeout(e.bind(0,a+1,0),2e3);o(t(n[a][u])),setTimeout(e.bind(0,a,u+1),1e3)}}function o(n){c.fillStyle="#001f3f",c.fillRect(0,0,a.width,a.height),c.fillStyle="#01FF70",n.forEach(function(n,a){c.fillText(n,100,100+75*a)})}var u=[];c.font="36px Papyrus, fantasy",e(0,0)}function t(n,a){return 0|Math.random()*n+0|a}function e(n,a){var t,e=["I spotted a "+a.name+".",l()+n.bab>=a.ac?"The "+a.name+" was no match for me!":"I managed to flee."];return l()+a.bab>n.ac&&(t=a.dmg(),n.hp-=t,e.push("I took "+t+" damage."),e.push("Status: HP "+n.hp+", Gold "+n.gold)),e}function o(n,a){var t=["I see a "+a.name],e=l()+n.bab;return e>=a.ac?(t.push("I found some gold coins!"),n.gold+=f()):(t.push("It was a trap!"),e=a.dmg(),n.hp-=e,t.push("I took "+e+" damage.")),t}function u(n){var a=["Status: HP "+n.hp+", Gold "+n.gold];return a}function i(){for(var n,a,c,i=[],l={hp:11,bab:5,ac:17,gold:0},h=[{name:"Goblin",bab:2,ac:13,dmg:f},{name:"Elk",bab:3,ac:13,dmg:r},{name:"Wolf",bab:2,ac:14,dmg:r}],d={name:"strange rocks",ac:13,dmg:f};l.hp>0;)a=f(),n=null,1===a&&(c=h[t(h.length)],n=e(l,c)),2===a&&(n=o(l,d)),4===a&&l.hp<11&&(n=u(l)),n&&i.push(n);return i}var l=t.bind(0,20,1),f=t.bind(0,4,1),r=t.bind(0,6,1),h=i();console.log(h),n(h)}();

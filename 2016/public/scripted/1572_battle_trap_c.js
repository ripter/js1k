!function(){function n(n){function t(a){return 5===o.length&&o.shift(),o.push(a),o}function e(a,o){if(n.length!==a){if(o===n[a].length)return setTimeout(e.bind(0,a+1,0),2e3);h(t(n[a][o])),setTimeout(e.bind(0,a,o+1),1e3)}}function h(n){c.fillStyle="#001f3f",c.fillRect(0,0,a.width,a.height),c.fillStyle="#01FF70",n.forEach(function(a,n){c.fillText(a,100,100+75*n)})}var o=[];c.font="36px Papyrus, fantasy",e(0,0)}function t(a,n){return 0|Math.random()*a+0|n}function e(a,n){for(var t,e=["Battle: "+n.name+" hp: "+n.hp],h=n.hp;a.hp>0&&h>0;){if(u()+a.bab>=n.ac?(t=a.dmg(),h-=t,e.push("Attack: "+t+" damage.")):e.push("Attack Missed"),n.hp<1){e.push("Won! My hp: "+a.hp);break}if(u()+n.bab>a.ac&&(t=n.dmg(),a.hp-=t,e.push("I was hit for "+t+" damage.")),a.hp<1){e.push("I was slain by a "+n.name);break}}return e}function h(a,n){var t=["I see a "+n.name],e=u()+a.bab;return e>=n.ac?(t.push("I found some gold coins!"),a.gold+=f()):(t.push("It was a trap!"),e=n.dmg(),a.hp-=e,t.push("I took "+e+" damage.")),t}function o(a){var n=["Status: HP "+a.hp+", Gold "+a.gold];return n}function i(){for(var a,n,i,u=[],c={hp:11,bab:5,ac:17,gold:0,dmg:p},l=[{name:"Goblin",hp:6,ac:13,bab:2,dmg:f},{name:"Goblin Dog",hp:9,ac:13,bab:2,dmg:r},{name:"Goblin Snake",hp:13,ac:14,bab:2,dmg:f},{name:"Golden Cat",hp:11,ac:15,bab:5,dmg:f}],b={name:"strange rocks",ac:13,dmg:f};c.hp>0;)n=f(),a=null,1===n&&(i=l[t(l.length)],a=e(c,i)),2===n&&(a=h(c,b)),4===n&&c.hp<11&&(a=o(c)),a&&u.push(a);return u}var u=t.bind(0,20,1),p=t.bind(0,8,1),r=t.bind(0,6,1),f=t.bind(0,4,1),l=i();console.log(l),n(l)}();
